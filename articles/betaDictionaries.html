<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Beta dictionaries • dsUpload</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Beta dictionaries">
<meta property="og:description" content="dsUpload">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dsUpload</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">4.0.3.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/dsUpload.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/betaDictionaries.html">Beta dictionaries</a>
    </li>
    <li>
      <a href="../articles/dataVersioning.html">Data versioning</a>
    </li>
    <li>
      <a href="../articles/qualityControl.html">Quality control</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/lifecycle-project/ds-upload/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><link href="betaDictionaries_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="betaDictionaries_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Beta dictionaries</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/lifecycle-project/ds-upload/blob/master/vignettes/betaDictionaries.Rmd"><code>vignettes/betaDictionaries.Rmd</code></a></small>
      <div class="hidden name"><code>betaDictionaries.Rmd</code></div>

    </div>

    
    
<div id="beta-dictionaries" class="section level1">
<h1 class="hasAnchor">
<a href="#beta-dictionaries" class="anchor"></a>Beta dictionaries</h1>
<p>The beta dictionaries are used to be able to initiate creation of dictonaries in the harmonisation process of new variables in a very early stage. As a PI you can manage and create new dictionaries which can be uploaded and tested by involved cohorts in a pilot phase of the project. Dictionaries can be changed and updated at any time and the network will be unaffected. After testing and approving the final beta dictionary the variables will be included in the main dictionaries and released when in the 3 months cycle.</p>
<div id="how-it-works" class="section level2">
<h2 class="hasAnchor">
<a href="#how-it-works" class="anchor"></a>How it works</h2>
<p>You need to have a few prerequisites</p>
<ul>
<li><a href="https://git-scm.com/">Git</a></li>
<li><a href="https://rstudio.com/">RStudio</a></li>
<li><a href="https://github.com/obiba/opal">Opal</a></li>
<li><a href="https://github.com/molgenis/molgenis-service-armadillo">Opal</a></li>
<li><a href="https://www.microsoft.com/nl-nl/microsoft-365/excel">Excel</a></li>
</ul>
</div>
<div id="working-with-ds-beta-dictionaries" class="section level2">
<h2 class="hasAnchor">
<a href="#working-with-ds-beta-dictionaries" class="anchor"></a>Working with ds-beta-dictionaries</h2>
<p>You need to ‘clone’ the repository on your own workingstation to be able to create new dictionaries. This means you get a copy of the directory on your own system. You can do this by executing the following command:</p>
<p><code>git clone https://github.com/lifecycle-project/ds-beta-dictionaries</code></p>
<p>Now you have your own copy to work in.</p>
</div>
<div id="create-dictionaries" class="section level2">
<h2 class="hasAnchor">
<a href="#create-dictionaries" class="anchor"></a>Create dictionaries</h2>
<p>Within the <em>dictionaries</em>-directory of the repository you need to create a dictionary for your study. This will result in a structure like:</p>
<ul>
<li>ds-beta-dictionaries
<ul>
<li>dictionaries
<ul>
<li>yourstudy
<ul>
<li>dict_#flavor$</li>
<li>dict_#different flavor$</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The flavors can be:</p>
<ul>
<li>non_rep</li>
<li>weekly_rep (0-)</li>
<li>monthly_rep (0-219)</li>
<li>trimester (1-3)</li>
<li>yearly_rep (0-17)</li>
</ul>
<p>Then you need to create a dictionary based upon the variables you want to harmonise. To illustrate how you do this you can use the <a href="https://github.com/lifecycle-project/ds-beta-dictionaries/blob/master/dictionaries/example-dictionary/example-dictionary-non_rep.xlsx?raw=true">example</a> as a reference.</p>
<p>When you finished writing the dictionary you need to commit and push them to the repository on Github. Please check the <a href="https://github.com/lifecycle-project/analysis-tutorials/blob/master/GIT-WORKFLOW.md">git-workflow</a> document to get the dictionaries exposed.</p>
</div>
<div id="upload-dictionaries-and-data" class="section level2">
<h2 class="hasAnchor">
<a href="#upload-dictionaries-and-data" class="anchor"></a>Upload dictionaries and data</h2>
<p>We now support multiple backend with the beta-dictionaries.</p>
<ul>
<li>Armadillo</li>
<li>Opal</li>
</ul>
<div id="upload-to-armadillo" class="section level3">
<h3 class="hasAnchor">
<a href="#upload-to-armadillo" class="anchor"></a>Upload to Armadillo</h3>
<p>When a first version of a beta dictionary is available, you can upload it to the Armadillo with the following code:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">login_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">server =</span> <span class="st">"https://armadillo.test.molgenis.org"</span>, <span class="dt">storage =</span> <span class="st">"https://armadillo-minio.test.molgenis.org"</span>, <span class="dt">driver =</span> <span class="st">"ArmadilloDriver"</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">du.login</span>(login_data)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#&gt;   Login to: "https://armadillo.test.molgenis.org"</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">#&gt; [1] "We're opening a browser so you can log in with code HXMBW6"</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt;   Logged on to: "https://armadillo.test.molgenis.org"</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">  </a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="kw">du.upload.beta</span>(</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">  <span class="dt">dict_name =</span> <span class="st">"example-dictionary"</span>, </a>
<a class="sourceLine" id="cb1-10" data-line-number="10">  <span class="dt">data_input_path =</span> <span class="st">"/Users/sido/VisualStudioCodeProjects/ds-beta-dictionaries/data/example-dictionary/beta_dict_generated_data.csv"</span>)</a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt; ######################################################</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt;   Start upload BETA data into DataSHIELD backend</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt; ------------------------------------------------------</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt;  * Create temporary workdir</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt; ######################################################</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt;   Start download dictionaries</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt; ------------------------------------------------------</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt; * Download: [ example-dictionary-non_rep.xlsx ]</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#&gt; * Download: [ example-dictionary-yearly_rep.xlsx ]</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt;   Successfully downloaded dictionaries</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="co">#&gt; * Project : exampledictionary already exists</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="co">#&gt; ######################################################</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23"><span class="co">#&gt;   Start converting and importing data</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="co">#&gt; ######################################################</span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="co">#&gt; * Setup: load data and set output directory</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26"><span class="co">#&gt; ------------------------------------------------------</span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27"><span class="co">#&gt; * Generating: non-repeated measures</span></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"><span class="co">#&gt; * Start importing: beta into project: exampledictionary</span></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"><span class="co">#&gt; Compressing...</span></a>
<a class="sourceLine" id="cb1-30" data-line-number="30"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-31" data-line-number="31">  <span class="op">|</span><span class="st">                                                                                          </span></a>
<a class="sourceLine" id="cb1-32" data-line-number="32"><span class="st">  </span><span class="er">|</span><span class="st">                                                                                    </span><span class="er">|</span><span class="st">   </span><span class="dv">0</span>%</a>
<a class="sourceLine" id="cb1-33" data-line-number="33">  <span class="op">|</span><span class="st">                                                                                          </span></a>
<a class="sourceLine" id="cb1-34" data-line-number="34"><span class="st">  </span><span class="er">|====================================================================================|</span><span class="st"> </span><span class="dv">100</span>%</a>
<a class="sourceLine" id="cb1-35" data-line-number="35"><span class="co">#&gt; Uploaded beta/non_rep</span></a>
<a class="sourceLine" id="cb1-36" data-line-number="36"><span class="co">#&gt; * Import finished successfully</span></a>
<a class="sourceLine" id="cb1-37" data-line-number="37"><span class="co">#&gt; * Generating: yearly-repeated measures</span></a>
<a class="sourceLine" id="cb1-38" data-line-number="38"><span class="co">#&gt; * Start importing: beta into project: exampledictionary</span></a>
<a class="sourceLine" id="cb1-39" data-line-number="39"><span class="co">#&gt; Compressing...</span></a>
<a class="sourceLine" id="cb1-40" data-line-number="40"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-41" data-line-number="41">  <span class="op">|</span><span class="st">                                                                                          </span></a>
<a class="sourceLine" id="cb1-42" data-line-number="42"><span class="st">  </span><span class="er">|</span><span class="st">                                                                                    </span><span class="er">|</span><span class="st">   </span><span class="dv">0</span>%</a>
<a class="sourceLine" id="cb1-43" data-line-number="43">  <span class="op">|</span><span class="st">                                                                                          </span></a>
<a class="sourceLine" id="cb1-44" data-line-number="44"><span class="st">  </span><span class="er">|==========================</span><span class="st">                                                          </span><span class="er">|</span><span class="st">  </span><span class="dv">31</span>%</a>
<a class="sourceLine" id="cb1-45" data-line-number="45">  <span class="op">|</span><span class="st">                                                                                          </span></a>
<a class="sourceLine" id="cb1-46" data-line-number="46"><span class="st">  </span><span class="er">|====================================================</span><span class="st">                                </span><span class="er">|</span><span class="st">  </span><span class="dv">62</span>%</a>
<a class="sourceLine" id="cb1-47" data-line-number="47">  <span class="op">|</span><span class="st">                                                                                          </span></a>
<a class="sourceLine" id="cb1-48" data-line-number="48"><span class="st">  </span><span class="er">|==============================================================================</span><span class="st">      </span><span class="er">|</span><span class="st">  </span><span class="dv">93</span>%</a>
<a class="sourceLine" id="cb1-49" data-line-number="49">  <span class="op">|</span><span class="st">                                                                                          </span></a>
<a class="sourceLine" id="cb1-50" data-line-number="50"><span class="st">  </span><span class="er">|====================================================================================|</span><span class="st"> </span><span class="dv">100</span>%</a>
<a class="sourceLine" id="cb1-51" data-line-number="51"><span class="co">#&gt; Uploaded beta/yearly_rep</span></a>
<a class="sourceLine" id="cb1-52" data-line-number="52"><span class="co">#&gt; * Import finished successfully</span></a>
<a class="sourceLine" id="cb1-53" data-line-number="53"><span class="co">#&gt; ######################################################</span></a>
<a class="sourceLine" id="cb1-54" data-line-number="54"><span class="co">#&gt;   Converting and import successfully finished</span></a>
<a class="sourceLine" id="cb1-55" data-line-number="55"><span class="co">#&gt; ######################################################</span></a>
<a class="sourceLine" id="cb1-56" data-line-number="56"><span class="co">#&gt;  * Reinstate default working directory</span></a>
<a class="sourceLine" id="cb1-57" data-line-number="57"><span class="co">#&gt;  * Cleanup temporary directory</span></a></code></pre></div>
<p>You will be able to check the data in the Armadillo immediately.</p>
</div>
</div>
<div id="upload-to-opal" class="section level2">
<h2 class="hasAnchor">
<a href="#upload-to-opal" class="anchor"></a>Upload to Opal</h2>
<p>When a first version of a beta dictionary is available, you can upload it to Opal with the following code:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="va">login_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>server <span class="op">=</span> <span class="st">"https://opal.edge.molgenis.org"</span>, password <span class="op">=</span> <span class="st">"Ui3thahr"</span>, driver <span class="op">=</span> <span class="st">"OpalDriver"</span><span class="op">)</span>

<span class="fu"><a href="../reference/du.login.html">du.login</a></span><span class="op">(</span><span class="va">login_data</span><span class="op">)</span>
<span class="co">#&gt;   Login to: "https://opal.edge.molgenis.org"</span>
<span class="co">#&gt;   Logged on to: "https://opal.edge.molgenis.org"</span>
  
<span class="fu"><a href="../reference/du.upload.beta.html">du.upload.beta</a></span><span class="op">(</span>
  dict_name <span class="op">=</span> <span class="st">"example-dictionary"</span>, 
  data_input_path <span class="op">=</span> <span class="st">"/Users/sido/VisualStudioCodeProjects/ds-beta-dictionaries/data/example-dictionary/beta_dict_generated_data.csv"</span><span class="op">)</span>
<span class="co">#&gt; ######################################################</span>
<span class="co">#&gt;   Start upload BETA data into DataSHIELD backend</span>
<span class="co">#&gt; ------------------------------------------------------</span>
<span class="co">#&gt;  * Create temporary workdir</span>
<span class="co">#&gt; ######################################################</span>
<span class="co">#&gt;   Start download dictionaries</span>
<span class="co">#&gt; ------------------------------------------------------</span>
<span class="co">#&gt; * Download: [ example-dictionary-non_rep.xlsx ]</span>
<span class="co">#&gt; * Download: [ example-dictionary-yearly_rep.xlsx ]</span>
<span class="co">#&gt;   Successfully downloaded dictionaries</span>
<span class="co">#&gt; ------------------------------------------------------</span>
<span class="co">#&gt;   Start creating project: [ lc_beta_example-dictionary ]</span>
<span class="co">#&gt; * Project: [ lc_beta_example-dictionary ] already exists</span>
<span class="co">#&gt; ------------------------------------------------------</span>
<span class="co">#&gt;   Start importing dictionaries</span>
<span class="co">#&gt; * Table: [ example-dictionary-non_rep ] already exists</span>
<span class="co">#&gt; * Matched categories for table: [ example-dictionary-non_rep ]</span>
<span class="co">#&gt; * Import variables into: [ example-dictionary-non_rep ]</span>
<span class="co">#&gt; * Table: [ example-dictionary-yearly_rep ] already exists</span>
<span class="co">#&gt; * Import variables into: [ example-dictionary-yearly_rep ]</span>
<span class="co">#&gt;   All dictionaries are populated correctly</span>
<span class="co">#&gt; ######################################################</span>
<span class="co">#&gt;   Start converting and importing data</span>
<span class="co">#&gt; ######################################################</span>
<span class="co">#&gt; * Setup: load data and set output directory</span>
<span class="co">#&gt; ------------------------------------------------------</span>
<span class="co">#&gt; * Generating: non-repeated measures</span>
<span class="co">#&gt; * Upload: [ 2020-12-02_15-07-38_example-dictionary-non_rep.csv ] to directory [ beta ]</span>
<span class="co">#&gt; * Generating: yearly-repeated measures</span>
<span class="co">#&gt; * Upload: [ 2020-12-02_15-07-38_example-dictionary-yearly_rep.csv ] to directory [ beta ]</span>
<span class="co">#&gt; ######################################################</span>
<span class="co">#&gt;   Converting and import successfully finished</span>
<span class="co">#&gt; ######################################################</span>
<span class="co">#&gt;  * Reinstate default working directory</span>
<span class="co">#&gt;  * Cleanup temporary directory</span></pre></div>
<p>After this you need to manually upload the data just like you would in a released data upload.</p>
<blockquote>
<p>Be advised: the data is now placed into directories on the target system, in this case a “beta” directory</p>
</blockquote>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sido Haakma, Angela Pinot de Moira, Maxime Cornet, Sebastian Rauschert.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
